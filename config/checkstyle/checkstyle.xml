<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
        "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
        "https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--
    Checkstyle Minimal Configuration для DVT-7
    Курс: "Java с нуля до оффера"
    Спринт: Sprint 3 Dev Tools
    Стратегия:
    - 12 critical checks (error) → fail build
    - 15 pedagogical checks (warning) → показываем, не блокируем
-->

<module name="Checker">

    <!-- ========== GLOBAL PROPERTIES ========== -->
    <property name="charset" value="UTF-8"/>
    <property name="severity" value="warning"/>
    <property name="fileExtensions" value="java"/>

    <!-- Exclude module-info.java -->
    <module name="BeforeExecutionExclusionFileFilter">
        <property name="fileNamePattern" value="module\-info\.java$"/>
    </module>

    <!-- ========== FILE-LEVEL CHECKS ========== -->
    <!-- CRITICAL: No tabs allowed -->
    <module name="FileTabCharacter">
        <property name="severity" value="error"/>
        <property name="eachLine" value="true"/>
    </module>

    <!-- WARNING: Line length limit -->
    <module name="LineLength">
        <property name="severity" value="warning"/>
        <property name="max" value="100"/>
        <property name="ignorePattern" value="^package.*|^import.*|a href|href|http://|https://|ftp://"/>
    </module>

    <!-- ========== TREE WALKER ========== -->
    <module name="TreeWalker">

        <!-- ==================== NAMING CONVENTIONS ==================== -->
        <!-- Package names: lowercase only -->
        <module name="PackageName">
            <property name="severity" value="error"/>
            <property name="format" value="^[a-z]+(\.[a-z][a-z0-9]*)*$"/>
        </module>

        <!-- Class/Interface names: PascalCase -->
        <module name="TypeName">
            <property name="severity" value="error"/>
            <property name="format" value="^[A-Z][a-zA-Z0-9]*$"/>
        </module>

        <!-- Method names: camelCase -->
        <module name="MethodName">
            <property name="severity" value="error"/>
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
        </module>

        <!-- Field names: camelCase -->
        <module name="MemberName">
            <property name="severity" value="error"/>
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
        </module>

        <!-- Local variable names: camelCase -->
        <module name="LocalVariableName">
            <property name="severity" value="error"/>
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
        </module>

        <!-- Parameter names: camelCase -->
        <module name="ParameterName">
            <property name="severity" value="error"/>
            <property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
        </module>

        <!-- Constant names: SCREAMING_SNAKE_CASE -->
        <module name="ConstantName">
            <property name="severity" value="error"/>
            <property name="format" value="^[A-Z][A-Z0-9]*(_[A-Z0-9]+)*$"/>
        </module>

        <!-- ==================== IMPORTS ==================== -->
        <!-- CRITICAL: No wildcard imports -->
        <module name="AvoidStarImport">
            <property name="severity" value="error"/>
        </module>

        <!-- WARNING: Import order -->
        <module name="CustomImportOrder">
            <property name="severity" value="warning"/>
            <property name="sortImportsInGroupAlphabetically" value="true"/>
            <property name="separateLineBetweenGroups" value="true"/>
            <property name="customImportOrderRules" value="STATIC###STANDARD_JAVA_PACKAGE###THIRD_PARTY_PACKAGE"/>
        </module>

        <!-- WARNING: Unused imports -->
        <module name="UnusedImports">
            <property name="severity" value="warning"/>
        </module>

        <!-- ==================== CODE STRUCTURE ==================== -->
        <!-- CRITICAL: One top-level class per file -->
        <module name="OneTopLevelClass">
            <property name="severity" value="error"/>
        </module>

        <!-- CRITICAL: Filename matches outer class name -->
        <module name="OuterTypeFilename">
            <property name="severity" value="error"/>
        </module>

        <!-- CRITICAL: One statement per line -->
        <module name="OneStatementPerLine">
            <property name="severity" value="error"/>
        </module>

        <!-- WARNING: One variable per declaration -->
        <module name="MultipleVariableDeclarations">
            <property name="severity" value="warning"/>
        </module>

        <!-- ==================== BRACES & BLOCKS ==================== -->
        <!-- CRITICAL: Braces required for if/while/for/do -->
        <module name="NeedBraces">
            <property name="severity" value="error"/>
            <property name="allowSingleLineStatement" value="false"/>
        </module>

        <!-- WARNING: Left brace placement (K&R style) -->
        <module name="LeftCurly">
            <property name="severity" value="warning"/>
            <property name="option" value="eol"/>
        </module>

        <!-- WARNING: Right brace placement -->
        <module name="RightCurly">
            <property name="severity" value="warning"/>
            <property name="option" value="alone"/>
            <property name="tokens" value="CLASS_DEF, METHOD_DEF, CTOR_DEF, LITERAL_FOR, LITERAL_WHILE, STATIC_INIT, INSTANCE_INIT"/>
        </module>

        <!-- ==================== INDENTATION ==================== -->
        <!-- CRITICAL: 2-space indentation (Google Style) -->
        <module name="Indentation">
            <property name="severity" value="error"/>
            <property name="basicOffset" value="2"/>
            <property name="braceAdjustment" value="0"/>
            <property name="caseIndent" value="2"/>
            <property name="throwsIndent" value="4"/>
            <property name="lineWrappingIndentation" value="4"/>
            <property name="arrayInitIndent" value="2"/>
        </module>

        <!-- ==================== WHITESPACE ==================== -->
        <!-- Whitespace around operators -->
        <module name="WhitespaceAround">
            <property name="severity" value="warning"/>
            <property name="allowEmptyConstructors" value="true"/>
            <property name="allowEmptyMethods" value="true"/>
            <property name="allowEmptyTypes" value="true"/>
            <property name="allowEmptyLoops" value="true"/>
        </module>

        <!-- Whitespace after tokens -->
        <module name="WhitespaceAfter">
            <property name="severity" value="warning"/>
            <property name="tokens" value="COMMA, SEMI, TYPECAST"/>
        </module>

        <!-- No whitespace before -->
        <module name="NoWhitespaceBefore">
            <property name="severity" value="warning"/>
            <property name="tokens" value="COMMA, SEMI, POST_INC, POST_DEC, DOT, ELLIPSIS, METHOD_REF"/>
            <property name="allowLineBreaks" value="true"/>
        </module>

        <!-- Parenthesis padding -->
        <module name="ParenPad">
            <property name="severity" value="warning"/>
            <property name="option" value="nospace"/>
        </module>

        <!-- Generic whitespace -->
        <module name="GenericWhitespace">
            <property name="severity" value="warning"/>
        </module>

        <!-- ==================== MISCELLANEOUS ==================== -->
        <!-- CRITICAL: Java-style array declarations -->
        <module name="ArrayTypeStyle">
            <property name="severity" value="error"/>
        </module>

        <!-- WARNING: Empty catch blocks require comment -->
        <module name="EmptyCatchBlock">
            <property name="severity" value="warning"/>
            <property name="exceptionVariableName" value="expected|ignore"/>
            <property name="commentFormat" value=".*"/>
        </module>

        <!-- WARNING: Modifier order -->
        <module name="ModifierOrder">
            <property name="severity" value="warning"/>
        </module>

        <!-- WARNING: Empty line separator -->
        <module name="EmptyLineSeparator">
            <property name="severity" value="warning"/>
            <property name="allowNoEmptyLineBetweenFields" value="true"/>
            <property name="allowMultipleEmptyLines" value="false"/>
            <property name="tokens" value="PACKAGE_DEF, IMPORT, CLASS_DEF, INTERFACE_DEF, ENUM_DEF,
                STATIC_INIT, INSTANCE_INIT, METHOD_DEF, CTOR_DEF"/>
        </module>

        <!-- WARNING: Fall through in switch -->
        <module name="FallThrough">
            <property name="severity" value="warning"/>
        </module>

        <!-- WARNING: Upper ell -->
        <module name="UpperEll">
            <property name="severity" value="warning"/>
        </module>

        <!-- ==================== OPERATOR WRAPPING ==================== -->
        <!-- WARNING: Operator on new line -->
        <module name="OperatorWrap">
            <property name="severity" value="warning"/>
            <property name="option" value="nl"/>
            <property name="tokens" value="BAND, BOR, BSR, BXOR, DIV, EQUAL, GE, GT, LAND, LE, LITERAL_INSTANCEOF, LOR, LT, MINUS, MOD, NOT_EQUAL, PLUS, QUESTION, SL, SR, STAR, METHOD_REF"/>
        </module>

        <!-- ==================== SUPPRESSION COMMENTS ==================== -->
        <!-- Suppression Comments (опционально) -->
        <module name="SuppressionCommentFilter">
            <property name="offCommentFormat" value="CHECKSTYLE.OFF\: ([\w\|]+)"/>
            <property name="onCommentFormat" value="CHECKSTYLE.ON\: ([\w\|]+)"/>
            <property name="checkFormat" value="$1"/>
        </module>

    </module> <!-- Конец TreeWalker -->

</module> <!-- Конец Checker -->